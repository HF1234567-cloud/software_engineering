# 银行卡管理系统 - 改进版 v1.0

## 项目简介

本项目是银行卡管理系统的改进版本,主要改进点是**将用户端和管理员端功能分离**,提供了更清晰的权限管理和使用体验。

## 主要改进

### 1. 双端分离设计
- **用户端**: 普通银行卡用户使用,需要卡号和密码登录
- **管理员端**: 系统管理员使用,暂不需要账号密码(后续可扩展)

### 2. 登录方式选择
程序启动后,首先显示登录方式选择界面:
- 选项1: 用户登录
- 选项2: 管理员登录
- 选项0: 退出系统

### 3. 功能分配

#### 用户端功能(需要卡号密码登录)
- 存款
- 取款
- 查询余额

#### 管理员端功能(管理员身份登录)
- 添加卡
- 查询卡
- 冻结卡
- 解冻卡
- 注销卡
- 统计
- 显示所有卡信息

## 目录结构

```
py改进1/
├── main.py              # 主程序入口
├── config.py            # 配置文件
├── models.py            # 数据模型
├── file_manager.py      # 文件管理
├── card_service.py      # 卡服务(业务逻辑)
├── statistics.py        # 统计功能
├── user_menu.py         # 用户端菜单
├── admin_menu.py        # 管理员端菜单
├── data/                # 数据目录(自动创建)
│   └── cards.json       # 卡信息数据文件
└── README.md            # 说明文档
```

## 使用方法

### 运行程序

```bash
python main.py
```

### 用户端使用流程

1. 启动程序后,选择 `1. 用户登录`
2. 输入已有的卡号和密码
3. 登录成功后,可以进行:
   - 存款操作
   - 取款操作
   - 查询余额
4. 完成操作后,选择 `0. 退出登录`

### 管理员端使用流程

1. 启动程序后,选择 `2. 管理员登录`
2. 自动通过管理员身份验证
3. 登录成功后,可以进行:
   - 添加新卡
   - 查询卡信息(精确/模糊查询)
   - 冻结/解冻卡
   - 注销卡
   - 统计功能(已冻结、已注销、欠费卡等)
   - 显示所有卡信息
4. 完成操作后,选择 `0. 退出系统`

## 功能说明

### 用户端功能详解

#### 1. 存款
- 输入存款金额
- 系统自动更新余额和累计金额
- 如果卡之前是欠费状态,存款后自动恢复正常

#### 2. 取款
- 显示当前余额
- 输入取款金额
- 检查余额是否充足
- 成功后显示剩余余额

#### 3. 查询余额
- 显示卡号
- 显示当前余额
- 显示累计金额
- 显示使用次数
- 显示卡状态
- 显示开卡时间和截止时间

### 管理员端功能详解

#### 1. 添加卡
- 输入卡号(1-18位)
- 输入密码(1-8位)
- 输入开卡金额
- 系统自动创建卡并保存

#### 2. 查询卡
- **精确查询**: 输入完整卡号查询
- **模糊查询**: 输入关键字查询匹配的所有卡

#### 3. 冻结卡
- 输入卡号和密码
- 确认后冻结该卡
- 冻结后该卡无法进行存取款操作

#### 4. 解冻卡
- 输入卡号和密码
- 解冻已冻结的卡
- 解冻后恢复正常使用

#### 5. 注销卡
- 输入卡号和密码
- 需要二次确认
- **注意**: 注销操作不可恢复!

#### 6. 统计
- 统计已冻结的卡
- 统计已注销的卡
- 统计欠费卡
- 卡状态汇总(总卡数、各状态数量、总余额)

#### 7. 显示所有卡信息
- 列表形式显示所有卡的详细信息
- 包括卡号、状态、余额、累计金额、使用次数、时间等

## 数据说明

### 卡状态
- **正常**: 可以正常使用的卡
- **已冻结**: 被管理员冻结的卡,无法存取款
- **已注销**: 被永久注销的卡,无法恢复
- **欠费失效**: 余额不足导致失效的卡

### 数据存储
- 所有卡信息保存在 `data/cards.json` 文件中
- 采用JSON格式,便于查看和备份
- 每次操作后自动保存

## 安全性说明

### 用户端安全
- 需要卡号和密码才能登录
- 密码验证通过后才能进行操作
- 每次操作都会验证卡的状态

### 管理员端安全
- 当前版本暂不需要密码(简化使用)
- 后续版本可以添加管理员账号密码验证
- 管理员操作需要知道卡的密码才能冻结/解冻/注销

## 技术特性

### 1. 模块化设计
- 各功能模块独立,便于维护和扩展
- 用户端和管理员端完全分离

### 2. 数据安全
- 所有修改操作都有回滚机制
- 保存失败时自动恢复原状态

### 3. 用户友好
- 清晰的菜单界面
- 详细的操作提示
- 错误信息明确

### 4. 扩展性强
- 易于添加新功能
- 可以方便地添加管理员密码验证
- 可以扩展更多的统计功能

## 与原版本的区别

| 特性 | 原版本 | 改进版v1.0 |
|------|--------|-----------|
| 功能模式 | 单一菜单,所有功能混合 | 用户端和管理员端分离 |
| 登录方式 | 无登录概念 | 需要选择登录方式 |
| 用户操作 | 每次操作都需输入密码 | 登录一次,后续操作自动验证 |
| 权限管理 | 无权限区分 | 用户端/管理员端权限分离 |
| 界面体验 | 功能列表较长 | 分端后界面更简洁 |

## 后续扩展建议

1. **管理员密码验证**: 为管理员端添加账号密码系统
2. **操作日志**: 记录所有操作的日志,便于审计
3. **数据备份**: 添加自动备份功能
4. **批量操作**: 支持批量添加卡、批量冻结等
5. **报表导出**: 将统计结果导出为Excel或PDF
6. **密码修改**: 允许用户修改密码
7. **忘记密码**: 管理员可以重置用户密码

## 注意事项

1. 首次运行时,`data` 目录会自动创建
2. 如果没有卡数据,需要先用管理员端添加卡
3. 用户端登录需要使用管理员添加的卡号和密码
4. 注销操作不可恢复,请谨慎使用
5. 数据文件 `cards.json` 请定期备份

## 开发信息

- 版本: v1.0
- 开发语言: Python 3.x
- 编码: UTF-8
- 开发日期: 2025年11月11日

## 联系方式

如有问题或建议,请联系开发团队。

---

**祝您使用愉快!**
